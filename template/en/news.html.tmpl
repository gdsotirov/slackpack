[%# $Id: news.html.tmpl,v 1.9 2015/07/23 16:38:49 gsotirov Exp $ %]

[%# INFO & LICENSE :
  #
  # SlackPack
  # Copyright (C) 2006-2010  Georgi D. Sotirov, gdsotirov@dir.bg
  #
  # This program is free software; you can redistribute it and/or modify
  # it under the terms of the GNU General Public License as published by
  # the Free Software Foundation; either version 2 of the License, or
  # (at your option) any later version.
  #
  # This program is distributed in the hope that it will be useful,
  # but WITHOUT ANY WARRANTY; without even the implied warranty of
  # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  # GNU General Public License for more details.
  #
  # You should have received a copy of the GNU General Public License
  # along with this program; if not, write to the Free Software
  # Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
  #%]

[%# INTERFACE:
  #
  #  news - site news
  #  latest - latest 10 news
  #  calendar - news calendar
  #  year - for which year are the news
  #  month - for which month are the news (relative to the year) :-)
  #  yearmonth - for which date are the news
  #
  #%]

[% USE date(format = '%Y-%m-%d/%H:%M:%S', locale = 'en_US', gmt = 0) %]

[% feedl = [] %]
[% feedl.push({title => "Latest news (Atom)",
               type => "application/atom+xml",
               url => "feed.cgi?q=news&amp;type=atom"
              }) %]
[% feedl.push({title => "Latest news (RSS)",
               type => "application/rss+xml",
               url => "feed.cgi?q=news&amp;type=rss"
              }) %]
[% feedl.push({title => "Latest news (RDF)",
               type => "application/rdf+xml",
               url => "feed.cgi?q=news&amp;type=rdf"
              }) %]
[% PROCESS global/leftbar.feeds.tmpl %]
[% FOREACH feed = lb_feeds %]
[%   feedl.push(feed) %]
[% END %]

[% PROCESS global/header.html.tmpl
   title = "News",
   feeds = feedl
 %]

<div id="Content">

[% PROCESS global/leftbar.html.tmpl %]

<div id="Main" class="News">
<div id="News">
[% IF year %]
[%   IF month %]
<h2>Site News for [% date.format(format=>'%B, %Y', time=> yearmonth) FILTER html %]</h2>
[%   ELSE %]
<h2>Site News for [% year FILTER html %]</h2>
[%   END %]
[% ELSE %]
<h2>Latest Site News</h2>
[% END %]
[% FOREACH n = news %]
<div id="n[% n.id FILTER html %]">
<h3>[% n.title FILTER html %]</h3>
<p><em>Published on [% date.format(format=>'%Y-%m-%d at %H:%M:%S', time=>n.published, gmt=>0) FILTER html %] by</em>&nbsp;
<a href="mailto:[% n.author.email FILTER email %]">[% n.author.firstname FILTER html %] [%+ n.author.name FILTER html %]</a></p>
<div id="body[% n.id FILTER html %]">
[% n.body %]</div>
</div>
[% END %]
</div>
</div>

<div id="RightBarNews">
<div id="LatestHeaders">
<h2>Latest 10</h2>
<map id="map_latest"><ul>
[% FOREACH l = latest %]
<li><a href="news.cgi?id=[% l.id %]">[% l.title FILTER html %]</a></li>
[% END %]
</ul></map>
</div>

<div id="Calendar">
<h2>Calendar</h2>
<map id="map_cal"><ul>
[% FOREACH c = calendar %]
<li><a href="news.cgi?y=[% c.Year %]&amp;m=[% c.Month %]">
[% SWITCH c.Month %]
[%   CASE 1  %]January
[%   CASE 2  %]February
[%   CASE 3  %]March
[%   CASE 4  %]April
[%   CASE 5  %]May
[%   CASE 6  %]June
[%   CASE 7  %]July
[%   CASE 8  %]August
[%   CASE 9  %]September
[%   CASE 10 %]October
[%   CASE 11 %]November
[%   CASE 12 %]December
[% END %], [% c.Year FILTER html %] ([% c.News FILTER html %])</a></li>
[% END %]
</ul></map>
</div>

<div id="Syndication">
<h2>Syndication</h2>
<map id="map_syn"><ul>
<li><a href="feed.cgi?q=news&amp;type=atom" title="Latest news (Atom)"
       type="application/atom+xml">Latest news (Atom)</a>&nbsp;<img alt="Feed"
       longdesc="img/feed-icon" src="img/feed-icon" /></li>
<li><a href="feed.cgi?q=news&amp;type=rss" title="Latest news (RSS)"
       type="application/rss+xml"><abbr title="Really Simple
       Syndication">Latest news (RSS)</abbr></a>&nbsp;<img alt="Feed"
       longdesc="img/feed-icon" src="img/feed-icon" /></li>
<li><a href="feed.cgi?q=news&amp;type=rdf" title="Latest news (RDF)"
       type="application/rdf+xml"><abbr title="Resource Definition
       Framework">Latest news (RDF)</abbr></a>&nbsp;<img alt="Feed"
       longdesc="img/feed-icon" src="img/feed-icon" /></li>
</ul></map>
</div>
</div>

</div>

[% PROCESS global/footer.html.tmpl %]

